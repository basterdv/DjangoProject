{% extends "base.html" %}
{% load static %}
{% block title %}Личный кабинет{% endblock title %}

{% block content %}
    <link href="{% static 'css/profile_styles.css' %}" rel="stylesheet">
    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <div class="flex flex-col md:flex-row gap-8">
            <!-- Sidebar -->
            <aside class="md:w-1/4">
                <div class="bg-white rounded-lg shadow p-6 mb-6">
                    <div class="flex items-center mb-6">
                        <div class="w-16 h-16 rounded-full bg-blue-100 flex items-center justify-center mr-4">
                            <i class="fas fa-user text-blue-600 text-2xl"></i>
                        </div>
                        <div>
                            <h3 class="font-bold">{{ user.first_name }} {{ user.last_name }}</h3>
                            <span class="text-sm text-gray-500">На сервисе 1 год</span>
                        </div>
                    </div>
                    <nav class="space-y-2">
                        <a href="profile.html"
                           class="block px-3 py-2 text-gray-600 hover:bg-blue-50 rounded hover:text-blue-600">
                            <i class="fas fa-user-circle mr-2"></i> Профиль
                        </a>
                        <a href="my-ads.html" class="block px-3 py-2 bg-blue-50 text-blue-600 rounded font-medium">
                            <i class="fas fa-list-alt mr-2"></i> Мои объявления
                        </a>
                        <a href="favorites.html"
                           class="block px-3 py-2 text-gray-600 hover:bg-blue-50 rounded hover:text-blue-600">
                            <i class="fas fa-heart mr-2"></i> Избранное
                        </a>
                        <a href="messages.html"
                           class="block px-3 py-2 text-gray-600 hover:bg-blue-50 rounded hover:text-blue-600">
                            <i class="fas fa-envelope mr-2"></i> Сообщения
                        </a>
                        {% if  user.is_staff %}
                            {#                            <li><a href="/admin/" class="text-white">Админка</a></li>#}
                            <a href="/admin/"
                               class="block px-3 py-2 text-gray-600 hover:bg-blue-50 rounded hover:text-blue-600">
                                <i class="fas fa-envelope mr-2"></i> Админка
                            </a>
                        {% endif %}

                        <a href="settings.html"
                           class="block px-3 py-2 text-gray-600 hover:bg-blue-50 rounded hover:text-blue-600">
                            <i class="fas fa-cog mr-2"></i> Настройки
                        </a>
                        <a href="{% url 'users:logout' %}"
                           class="block px-3 py-2 text-gray-600 hover:bg-blue-50 rounded hover:text-blue-600">
                            <i class="fas fa-sign-out-alt mr-2"></i> Выйти
                        </a>
                    </nav>
                </div>

                <div class="bg-white rounded-lg shadow p-6">
                    <h3 class="font-bold mb-4">Полезные советы</h3>
                    <div class="space-y-3">
                        <div class="flex items-start">
                            <i class="fas fa-check-circle text-blue-500 mt-1 mr-2"></i>
                            <span class="text-sm text-gray-600">Загружайте качественные фото товара с разных ракурсов</span>
                        </div>
                        <div class="flex items-start">
                            <i class="fas fa-check-circle text-blue-500 mt-1 mr-2"></i>
                            <span class="text-sm text-gray-600">Указывайте реальное состояние товара и все дефекты</span>
                        </div>
                        <div class="flex items-start">
                            <i class="fas fa-check-circle text-blue-500 mt-1 mr-2"></i>
                            <span class="text-sm text-gray-600">Подробно опишите желаемые варианты обмена</span>
                        </div>
                        <div class="flex items-start">
                            <i class="fas fa-check-circle text-blue-500 mt-1 mr-2"></i>
                            <span class="text-sm text-gray-600">Четко указывайте место встречи для обмена</span>
                        </div>
                    </div>
                </div>
            </aside>

            <!-- Main Content Area -->
            <div class="md:w-3/4">
                <div class="bg-white rounded-lg shadow overflow-hidden mb-6">
                    <div class="p-6 border-b border-gray-200">
                        <h1 class="text-2xl font-bold text-gray-800">Создать новое объявление</h1>
                    </div>

                    <!-- Progress Steps -->
                    <div class="border-b border-gray-200">
                        <div class="flex px-6 py-4">
                            <div class="flex-1 flex items-center">
                                <div class="w-8 h-8 rounded-full bg-blue-600 flex items-center justify-center text-white mr-3">
                                    <span>1</span>
                                </div>
                                <span class="font-medium text-blue-600">Основная информация</span>
                                <div class="border-t-2 border-blue-600 mx-3 flex-1"></div>
                            </div>
                            <div class="flex-1 flex items-center">
                                <div class="w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center text-gray-600 mr-3">
                                    <span>2</span>
                                </div>
                                <span class="font-medium text-gray-500">Фото и описание</span>
                                <div class="border-t-2 border-gray-200 mx-3 flex-1"></div>
                            </div>
                            <div class="flex-1 flex items-center">
                                <div class="w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center text-gray-600">
                                    <span>3</span>
                                </div>
                                <span class="font-medium text-gray-500 ml-3">Контакты</span>
                            </div>
                        </div>
                    </div>

                    <!-- Form -->
                    <div class="p-6">
                        <form id="ad-form">
                            <!-- Section 1: Basic Info -->
                            <div class="mb-8">
                                <h2 class="text-xl font-bold mb-4 text-gray-800">Основная информация</h2>

                                <!-- Title -->
                                <div class="mb-6">
                                    <label for="title" class="block text-sm font-medium text-gray-700 mb-1">Название
                                        товара
                                        <span class="text-red-600">*</span></label>
                                    <input type="text" id="title" name="title"
                                           class="block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50"
                                           placeholder="Например: iPhone 12 128GB" required="">
                                    <p class="mt-1 text-xs text-gray-500">Будьте конкретны и указывайте основные
                                        характеристики товара</p>
                                </div>

                                <!-- Price -->
                                <div class="mb-6">
                                    <label for="price" class="block text-sm font-medium text-gray-700 mb-1">Ваша цена
                                        <span
                                                class="text-red-600">*</span></label>
                                    <div class="relative rounded-md shadow-sm">
                                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                            <span class="text-gray-500 sm:text-sm">₽</span>
                                        </div>
                                        <input type="number" id="price" name="price"
                                               class="block w-full pl-8 pr-12 py-2 border border-gray-300 rounded-md focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50"
                                               placeholder="0" required="">
                                        <div class="absolute inset-y-0 right-0 flex items-center">
                                            <select class="h-full py-0 pl-2 pr-7 border-transparent bg-transparent text-gray-500 focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50 rounded-r-md">
                                                <option>Фиксированная</option>
                                                <option>Договорная</option>
                                                <option>Бесплатно</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>

                                <!-- Category -->
                                <div class="mb-6">
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Категория <span
                                            class="text-red-600">*</span></label>
                                    <div class="relative">
                                        <button type="button" id="category-toggle"
                                                class="block w-full px-4 py-2 text-left bg-white border border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50">
                                            <span id="selected-category">Выберите категорию</span>
                                            <span class="absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none">
                                                <i class="fas fa-chevron-down"></i>
                                            </span>
                                        </button>
                                        <div id="category-dropdown"
                                             class="absolute z-10 mt-1 w-full bg-white shadow-lg rounded-md p-2 border border-gray-300 hidden category-dropdown">
                                            <div class="border-b border-gray-200 mb-2 pb-2">
                                                <div class="text-xs font-semibold text-gray-500 px-2 py-1">Популярные
                                                </div>
                                                <button type="button"
                                                        class="block w-full text-left px-2 py-1 text-sm hover:bg-blue-50 hover:text-blue-600 rounded">
                                                    Электроника
                                                </button>
                                                <button type="button"
                                                        class="block w-full text-left px-2 py-1 text-sm hover:bg-blue-50 hover:text-blue-600 rounded">
                                                    Одежда
                                                </button>
                                                <button type="button"
                                                        class="block w-full text-left px-2 py-1 text-sm hover:bg-blue-50 hover:text-blue-600 rounded">
                                                    Для дома
                                                </button>
                                            </div>
                                            <div class="border-b border-gray-200 mb-2 pb-2">
                                                <div class="text-xs font-semibold text-gray-500 px-2 py-1">Техника</div>
                                                <button type="button"
                                                        class="block w-full text-left px-2 py-1 text-sm hover:bg-blue-50 hover:text-blue-600 rounded">
                                                    Смартфоны
                                                </button>
                                                <button type="button"
                                                        class="block w-full text-left px-2 py-1 text-sm hover:bg-blue-50 hover:text-blue-600 rounded">
                                                    Ноутбуки
                                                </button>
                                                <button type="button"
                                                        class="block w-full text-left px-2 py-1 text-sm hover:bg-blue-50 hover:text-blue-600 rounded">
                                                    Фототехника
                                                </button>
                                            </div>
                                            <div>
                                                <div class="text-xs font-semibold text-gray-500 px-2 py-1">Другое</div>
                                                <button type="button"
                                                        class="block w-full text-left px-2 py-1 text-sm hover:bg-blue-50 hover:text-blue-600 rounded">
                                                    Книги
                                                </button>
                                                <button type="button"
                                                        class="block w-full text-left px-2 py-1 text-sm hover:bg-blue-50 hover:text-blue-600 rounded">
                                                    Спорт
                                                </button>
                                                <button type="button"
                                                        class="block w-full text-left px-2 py-1 text-sm hover:bg-blue-50 hover:text-blue-600 rounded">
                                                    Детские товары
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Condition -->
                                <div class="mb-6">
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Состояние товара <span
                                            class="text-red-600">*</span></label>
                                    <div class="grid grid-cols-3 gap-2">
                                        <button type="button"
                                                class="condition-btn py-2 px-3 border border-gray-300 rounded-md text-sm hover:bg-blue-50 hover:border-blue-200 hover:text-blue-600">
                                            <i class="fas fa-check-circle text-green-500 mr-1"></i> Новый
                                        </button>
                                        <button type="button"
                                                class="condition-btn py-2 px-3 border border-gray-300 rounded-md text-sm hover:bg-blue-50 hover:border-blue-200 hover:text-blue-600">
                                            <i class="fas fa-star text-yellow-500 mr-1"></i> Отличное
                                        </button>
                                        <button type="button"
                                                class="condition-btn py-2 px-3 border border-gray-300 rounded-md text-sm hover:bg-blue-50 hover:border-blue-200 hover:text-blue-600">
                                            <i class="fas fa-check text-blue-500 mr-1"></i> Хорошее
                                        </button>
                                        <button type="button"
                                                class="condition-btn py-2 px-3 border border-gray-300 rounded-md text-sm hover:bg-blue-50 hover:border-blue-200 hover:text-blue-600">
                                            <i class="fas fa-exclamation-triangle text-orange-500 mr-1"></i>
                                            Удовлетворительное
                                        </button>
                                        <button type="button"
                                                class="condition-btn py-2 px-3 border border-gray-300 rounded-md text-sm hover:bg-blue-50 hover:border-blue-200 hover:text-blue-600">
                                            <i class="fas fa-tools text-gray-500 mr-1"></i> Требует ремонта
                                        </button>
                                        <button type="button"
                                                class="condition-btn py-2 px-3 border border-gray-300 rounded-md text-sm hover:bg-blue-50 hover:border-blue-200 hover:text-blue-600">
                                            <i class="fas fa-box-open text-gray-400 mr-1"></i> Б/У
                                        </button>
                                    </div>
                                    <input type="hidden" id="condition" name="condition">
                                </div>

                                <!-- Tags -->
                                <div class="mb-6">
                                    <label class="block text-sm font-medium text-gray-700 mb-1">Теги (до 5 штук)</label>
                                    <div class="flex flex-wrap gap-2 mb-2" id="tags-container"></div>
                                    <div class="relative">
                                        <div class="flex items-center border border-gray-300 rounded-md overflow-hidden">
                                            <input type="text" id="tag-input"
                                                   class="flex-grow px-4 py-2 focus:outline-none tag-input"
                                                   placeholder="Добавьте теги, например: iPhone, смартфон, обмен">
                                            <button type="button" id="add-tag-btn"
                                                    class="px-3 py-2 bg-gray-100 text-gray-600 hover:bg-gray-200">
                                                <i class="fas fa-plus"></i>
                                            </button>
                                        </div>
                                    </div>
                                    <p class="mt-1 text-xs text-gray-500">Теги помогают другим пользователям быстрее
                                        найти
                                        ваше объявление</p>
                                </div>

                                <!-- Exchange For -->
                                <div class="mb-6">
                                    <label for="exchange-for" class="block text-sm font-medium text-gray-700 mb-1">Хочу
                                        обменять на <span class="text-red-600">*</span></label>
                                    <textarea id="exchange-for" name="exchange-for" rows="3"
                                              class="block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50"
                                              placeholder="Например: Ноутбук, можно Android телефон, или рассмотрю другие предложения"
                                              required=""></textarea>
                                </div>
                            </div>

                            <!-- Section 2: Photos -->
                            <div class="mb-8">
                                <h2 class="text-xl font-bold mb-4 text-gray-800">Фотографии товара</h2>
                                <div class="mb-4">
                                    <div class="grid grid-cols-2 md:grid-cols-5 gap-4" id="image-preview-container">
                                        <!-- Empty upload box -->
                                        <label for="image-upload"
                                               class="aspect-square border-2 border-dashed border-gray-300 rounded-lg flex flex-col items-center justify-center cursor-pointer hover:bg-gray-50">
                                            <i class="fas fa-camera text-gray-400 text-2xl mb-2"></i>
                                            <span class="text-sm text-gray-500">Добавить фото</span>
                                            <input type="file" id="image-upload" class="hidden" accept="image/*"
                                                   multiple="">
                                        </label>
                                    </div>
                                    <div class="mt-2 text-xs text-gray-500">
                                        <p>Загрузите до 10 фотографий. Первое фото будет отображаться в списке
                                            объявлений.</p>
                                        <p>Разрешенные форматы: JPG, PNG до 5 МБ каждая.</p>
                                    </div>
                                </div>

                                <!-- Description -->
                                <div class="mb-6">
                                    <label for="description" class="block text-sm font-medium text-gray-700 mb-1">Описание
                                        товара <span class="text-red-600">*</span></label>
                                    <textarea id="description" name="description" rows="5"
                                              class="block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50"
                                              placeholder="Опишите товар подробно: характеристики, комплектацию, состояние, причины обмена и т.д."
                                              required=""></textarea>
                                    <div class="mt-1 flex justify-between">
                                        <p class="text-xs text-gray-500">Минимум 30 символов</p>
                                        <p class="text-xs text-gray-500"><span id="char-count">0</span>/2000</p>
                                    </div>
                                </div>

                                <!-- Extra Fields -->
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <!-- City -->
                                    <div>
                                        <label for="city" class="block text-sm font-medium text-gray-700 mb-1">Город
                                            <span
                                                    class="text-red-600">*</span></label>
                                        <input type="text" id="city" name="city"
                                               class="block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50"
                                               placeholder="Москва" required="">
                                    </div>

                                    <!-- Meeting Place -->
                                    <div>
                                        <label for="meeting-place" class="block text-sm font-medium text-gray-700 mb-1">Место
                                            встречи</label>
                                        <input type="text" id="meeting-place" name="meeting-place"
                                               class="block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50"
                                               placeholder="Например: м. Арбатская">
                                    </div>

                                    <!-- Delivery -->
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Возможность
                                            доставки</label>
                                        <div class="flex items-center gap-4">
                                            <label class="inline-flex items-center">
                                                <input type="radio" name="delivery" value="yes"
                                                       class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300">
                                                <span class="ml-2">Возможна</span>
                                            </label>
                                            <label class="inline-flex items-center">
                                                <input type="radio" name="delivery" value="no" checked=""
                                                       class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300">
                                                <span class="ml-2">Только встреча</span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Form Actions -->
                            <div class="flex flex-col-reverse sm:flex-row justify-end gap-3 pt-6 border-t border-gray-200">
                                <button type="button" id="save-draft-btn"
                                        class="px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                                    Сохранить черновик
                                </button>
                                <button type="submit" id="submit-btn"
                                        class="px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                                    Опубликовать объявление
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Tips Section -->
                <div class="bg-white rounded-lg shadow p-6">
                    <h3 class="font-bold mb-4 text-gray-800">Как создать хорошее объявление?</h3>
                    <div class="space-y-4">
                        <div class="flex items-start">
                            <div class="flex-shrink-0 h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center mr-4">
                                <i class="fas fa-camera text-blue-600"></i>
                            </div>
                            <div>
                                <h4 class="font-medium text-gray-800">Качественные фотографии</h4>
                                <p class="text-sm text-gray-600">Сделайте несколько четких фотографий товара при хорошем
                                    освещении. Покажите товар со всех ракурсов и все имеющиеся дефекты.</p>
                            </div>
                        </div>
                        <div class="flex items-start">
                            <div class="flex-shrink-0 h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center mr-4">
                                <i class="fas fa-clipboard-check text-blue-600"></i>
                            </div>
                            <div>
                                <h4 class="font-medium text-gray-800">Честное описание</h4>
                                <p class="text-sm text-gray-600">Опишите товар максимально подробно: реальное состояние,
                                    комплектацию, причины обмена. Указание всех недостатков снизит количество
                                    споров.</p>
                            </div>
                        </div>
                        <div class="flex items-start">
                            <div class="flex-shrink-0 h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center mr-4">
                                <i class="fas fa-exchange-alt text-blue-600"></i>
                            </div>
                            <div>
                                <h4 class="font-medium text-gray-800">Четкие условия обмена</h4>
                                <p class="text-sm text-gray-600">Четко укажите, на что хотите обменять товар и какие
                                    варианты рассматриваете. Возможность доплаты или встречного торга.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="{% static "js/jquery_profile.js" %}"></script>

{% endblock %}